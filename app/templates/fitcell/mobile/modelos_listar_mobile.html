<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Modelos</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

<link rel="stylesheet" href="{{ url_for('static', filename='paginas3.css') }}">

<style>
body{background:#eef4fb;}

.mobile-container{
padding:12px;
max-width:540px;
margin:auto;
}

.section-card{
background:#fff;
border-radius:18px;
padding:14px;
box-shadow:0 8px 22px rgba(0,0,0,.08);
margin-bottom:12px;
}
</style>
</head>

<body>

<div class="mobile-container">

{% include "_flash_messages.html" %}

<!-- HEADER -->

<div class="d-flex justify-content-between align-items-center mb-3">

<div class="d-flex align-items-center gap-2">
<div style="width:42px;height:42px;border-radius:14px;background:#0d6efd;color:#fff;
display:flex;align-items:center;justify-content:center;">
<i class="fa-solid fa-mobile-screen-button"></i>
</div>

<strong style="font-size:18px">Modelos</strong>
</div>

<a href="{{ url_for('routes.home_mobile') }}" class="btn btn-secondary btn-sm">
Voltar
</a>

</div>

<!-- BUSCA -->

<form method="GET" class="mb-3">
<input type="text" name="busca" value="{{ busca }}" class="form-control"
placeholder="Buscar modelo, variante ou marca">
</form>

<!-- NOVO -->

<a href="{{ url_for('routes.fitcell_novo_modelo_mobile') }}"
class="btn btn-success w-100 mb-3">
<i class="fa fa-plus"></i> Novo Modelo
</a>

<!-- LISTA -->
{% for m in modelos %}

<div class="section-card d-flex justify-content-between align-items-start gap-3">

<div class="flex-fill">

<div class="fw-semibold text-primary">
{{ m.nome }}{% if m.variante %} - {{ m.variante }}{% endif %}
</div>

<small class="text-muted">
{{ m.marca.nome }}
</small>

{% if m.ativo %}
<div class="mt-1">
<span class="badge bg-success-subtle text-success">Ativo</span>
</div>
{% else %}
<div class="mt-1">
<span class="badge bg-secondary-subtle">Inativo</span>
</div>
{% endif %}

</div>

<div class="d-flex flex-column gap-2">

<a href="{{ url_for('routes.fitcell_editar_modelo_mobile', id=m.id) }}"
class="btn btn-outline-warning btn-sm">
<i class="fas fa-pen"></i>
</a>

<form method="POST"
action="{{ url_for('routes.fitcell_excluir_modelo_mobile', id=m.id) }}"
onsubmit="return confirm('Deseja realmente excluir este modelo?')">

<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

<button class="btn btn-outline-danger btn-sm">
<i class="fas fa-trash"></i>
</button>

</form>

</div>

</div>

{% else %}

<div class="section-card text-center text-muted">
Nenhum modelo encontrado.
</div>

{% endfor %}


<!-- PAGINAÇÃO -->

{% if pagination.pages > 1 %}

<div class="d-flex justify-content-between mt-3">

{% if pagination.has_prev %}
<a class="btn btn-secondary"
href="{{ url_for(request.endpoint,page=pagination.prev_num) }}">
Anterior
</a>
{% else %}<div></div>{% endif %}

{% if pagination.has_next %}
<a class="btn btn-secondary"
href="{{ url_for(request.endpoint,page=pagination.next_num) }}">
Próxima
</a>
{% endif %}

</div>

{% endif %}

</div>

</body>
</html>
